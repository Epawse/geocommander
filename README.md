# GeoCommander-MCP

**åŸºäºå¤§æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰çš„è‡ªç„¶è¯­è¨€é©±åŠ¨ä¸‰ç»´åœ°ç†ç©ºé—´æŒ‡æŒ¥å®˜**

> ä¸€ä¸ªåˆ›æ–°çš„ WebGIS åº”ç”¨ï¼Œè®©ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€æ§åˆ¶ 3D åœ°çƒå¯è§†åŒ–

![GeoCommander](https://img.shields.io/badge/GeoCommander-MCP-blue)
![React](https://img.shields.io/badge/React-19-61dafb)
![Cesium](https://img.shields.io/badge/Cesium-1.124-green)
![Python](https://img.shields.io/badge/Python-3.11+-yellow)

## âœ¨ ç‰¹æ€§

- ğŸ—£ï¸ **è‡ªç„¶è¯­è¨€æ§åˆ¶** - ç”¨ä¸­æ–‡æŒ‡ä»¤æ§åˆ¶ 3D åœ°çƒï¼Œå¦‚"é£åˆ°ä¸Šæµ·å¤–æ»©"
- ğŸŒ **3D åœ°çƒå¯è§†åŒ–** - åŸºäº Cesium çš„é«˜æ€§èƒ½ä¸‰ç»´åœ°çƒæ¸²æŸ“
- ğŸ”Œ **MCP åè®®** - æ ‡å‡†åŒ–çš„å¤§æ¨¡å‹å·¥å…·è°ƒç”¨åè®®
- ğŸŒ¦ï¸ **å¤©æ°”æ•ˆæœ** - é›¨ã€é›ªã€é›¾ç­‰ç²’å­ç³»ç»Ÿå¤©æ°”æ¨¡æ‹Ÿ
- ğŸŒ“ **æ˜¼å¤œåˆ‡æ¢** - ç™½å¤©/å¤œæ™š/é»æ˜/é»„æ˜æ—¶é—´æ§åˆ¶
- ğŸ“ **POI æ ‡æ³¨** - åŠ¨æ€æ·»åŠ /åˆ é™¤åœ°å›¾æ ‡è®°ç‚¹
- ğŸ—ºï¸ **å¤šæºåº•å›¾** - å¤©åœ°å›¾å«æ˜Ÿã€çŸ¢é‡ã€åœ°å½¢å›¾å±‚
- ğŸ¤ **è¯­éŸ³è¾“å…¥** - æ”¯æŒè¯­éŸ³è¯†åˆ«è¾“å…¥æŒ‡ä»¤

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢ (React)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CommandInputâ”‚  â”‚  StatusBar  â”‚  â”‚    CesiumViewer          â”‚ â”‚
â”‚  â”‚ (è‡ªç„¶è¯­è¨€)   â”‚  â”‚ (MCPçŠ¶æ€)   â”‚  â”‚    (3Dæ¸²æŸ“)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                        â”‚              â”‚
â”‚         â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚                              â”‚  ActionDispatcher â”‚    â”‚
â”‚         â”‚                              â”‚  (JSONâ†’Cesium)    â”‚    â”‚
â”‚         â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ WebSocket                              â”‚ MCP Actions
          â”‚                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MCP Server (Python FastAPI)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ IntentParser  â”‚  â”‚  MCP Tools  â”‚  â”‚  Location Database     â”‚ â”‚
â”‚  â”‚ (æ„å›¾è§£æ)     â”‚  â”‚ (å·¥å…·å®šä¹‰)  â”‚  â”‚  (åœ°ç‚¹çŸ¥è¯†åº“)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼ (å¯é€‰)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    LLM API Integration                     â”‚  â”‚
â”‚  â”‚         Claude / GPT / Qwen / Local Models                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ MCP å·¥å…·

| å·¥å…· | æè¿° | ç¤ºä¾‹æŒ‡ä»¤ |
|------|------|---------|
| `fly_to` | é£è¡Œåˆ°æŒ‡å®šä½ç½® | "é£åˆ°åŒ—äº¬å¤©å®‰é—¨" |
| `switch_basemap` | åˆ‡æ¢åº•å›¾ | "åˆ‡æ¢åˆ°å«æ˜Ÿå½±åƒ" |
| `add_marker` | æ·»åŠ æ ‡è®°ç‚¹ | "åœ¨ä¸Šæµ·å¤–æ»©æ·»åŠ çº¢è‰²æ ‡è®°" |
| `set_weather` | è®¾ç½®å¤©æ°” | "æ˜¾ç¤ºä¸‹é›¨æ•ˆæœ" |
| `set_time` | è®¾ç½®æ—¶é—´ | "åˆ‡æ¢åˆ°å¤œæ™š" |
| `clear_markers` | æ¸…é™¤æ ‡è®° | "æ¸…é™¤æ‰€æœ‰æ ‡è®°" |
| `clear_weather` | æ¸…é™¤å¤©æ°” | "æ¸…é™¤å¤©æ°”æ•ˆæœ" |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç«¯

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### MCP Server

```bash
cd mcp-server

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ– venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
python server.py
```

### è®¿é—®åº”ç”¨

- å‰ç«¯: http://localhost:5173
- MCP Server: ws://localhost:8765

## ğŸ“ é¡¹ç›®ç»“æ„

```
geoscene/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CesiumViewer.tsx  # 3D åœ°çƒ
â”‚   â”‚   â”œâ”€â”€ CommandInput.tsx  # è‡ªç„¶è¯­è¨€è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx     # MCP çŠ¶æ€æ 
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ WebSocketService.ts  # WebSocket å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ dispatcher/
â”‚   â”‚   â””â”€â”€ ActionDispatcher.ts  # MCP åŠ¨ä½œåˆ†å‘
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ CesiumContext.tsx    # Cesium ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ mapConfig.ts         # åœ°å›¾é…ç½®
â”œâ”€â”€ mcp-server/
â”‚   â”œâ”€â”€ server.py           # MCP Server ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ requirements.txt    # Python ä¾èµ–
â”‚   â””â”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ package.json
```

## ğŸ¯ ç¤ºä¾‹æŒ‡ä»¤

```
é£åˆ°åŒ—äº¬å¤©å®‰é—¨å¹¿åœºä¸Šç©º 1000 ç±³
åˆ‡æ¢åˆ°å«æ˜Ÿå½±åƒå›¾
åœ¨ä¸Šæµ·ä¸œæ–¹æ˜ç å¡”ä½ç½®æ·»åŠ ä¸€ä¸ªçº¢è‰²æ ‡è®°
æ˜¾ç¤ºä¸‹é›¨å¤©æ°”æ•ˆæœ
å°†æ—¶é—´è®¾ç½®ä¸ºå¤œæ™š
æ¸…é™¤æ‰€æœ‰æ ‡è®°ç‚¹
é£åˆ°ç ç©†æœ—ç›å³°ï¼Œé«˜åº¦ 15000 ç±³
æ˜¾ç¤ºå¤§é›ªæ•ˆæœ
åˆ‡æ¢åˆ°é»æ˜æ—¶åˆ†
```

## ğŸ”§ é…ç½® LLMï¼ˆå¯é€‰ï¼‰

MCP Server é»˜è®¤ä½¿ç”¨è§„åˆ™åŒ¹é…è§£ææŒ‡ä»¤ã€‚å¦‚éœ€å¯ç”¨ LLM è¿›è¡Œæ›´æ™ºèƒ½çš„æ„å›¾ç†è§£ï¼š

1. å¤åˆ¶ `.env.example` ä¸º `.env`
2. é…ç½® API Key:

```env
USE_LLM=true
ANTHROPIC_API_KEY=your_claude_api_key
```

æ”¯æŒçš„ LLMï¼š
- Anthropic Claude
- OpenAI GPT
- é˜¿é‡Œäº‘ Qwen
- æœ¬åœ° Ollama

## ğŸ“ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„ MCP å·¥å…·

1. åœ¨ `mcp-server/server.py` ä¸­çš„ `MCP_TOOLS` åˆ—è¡¨æ·»åŠ å·¥å…·å®šä¹‰
2. åœ¨ `IntentParser` ç±»ä¸­æ·»åŠ è§£æè§„åˆ™
3. åœ¨å‰ç«¯ `ActionDispatcher.ts` ä¸­å®ç°å¯¹åº”çš„ Cesium æ“ä½œ

### æ·»åŠ æ–°åœ°ç‚¹

ç¼–è¾‘ `mcp-server/server.py` ä¸­çš„ `LOCATIONS` å­—å…¸ï¼š

```python
LOCATIONS["æ–°åœ°ç‚¹"] = Location(
    name="æ–°åœ°ç‚¹åç§°",
    longitude=116.0,
    latitude=40.0,
    altitude=5000
)
```

## ğŸ“„ License

MIT

## ğŸ™ è‡´è°¢

- [Cesium](https://cesium.com/) - 3D åœ°çƒå¼•æ“
- [å¤©åœ°å›¾](https://www.tianditu.gov.cn/) - åœ°å›¾æœåŠ¡
- [Model Context Protocol](https://modelcontextprotocol.io/) - MCP åè®®è§„èŒƒ
